<div class="flex flex-auto w-full">
  <div
      class="flex flex-col flex-auto bg-white overflow-scroll rounded-md"
  >
    <ng-container *ngIf="addingEntity | async as entity">
      <div class="p-4">
        <h4 class="">Add a new Student</h4>
        <div class="w-full">
          <app-student-form [entity]="entity" #addForm></app-student-form>

          <div class="flex items-center justify-end">
            <span class="inline-flex rounded-md shadow-sm mr-2">
              <button
                (click)="cancelAdd()"
                type="button"
                class="inline-flex items-center px-4 py-2 border border-transparent text-base leading-6 font-medium rounded-md text-white bg-red-600 hover:bg-red-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-red-700 transition ease-in-out duration-150"
              >
               Cancel
              </button>
            </span>

            <span class="inline-flex rounded-md shadow-sm">
              <button
                  (click)="addToCart(addForm.entity)"
                  type="button"
                  class="inline-flex items-center px-4 py-2 border border-transparent text-base leading-6 font-medium rounded-md text-white bg-green-600 hover:bg-green-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-green-700 transition ease-in-out duration-150"
              >
               Add Student
              </button>
            </span>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="!(addingEntity | async) && rows | async as entities">
      <ng-container *ngIf="!entities.length">
        <div class="flex items-center justify-center">
          <div class="flex flex-col items-center w-full px-2 py-4">
            <div
                class="flex items-center justify-center p-5 bg-indigo-100 rounded-full"
            >
              <!--  <mat-icon-->
              <!--      class="icon-size-40 text-indigo"-->
              <!--      [svgIcon]="'dripicons:folder-open'"-->
              <!--  ></mat-icon>-->
            </div>
            <div class="text-2xl font-semibold leading-tight text-center mt-6">
              The list is empty!
            </div>
            <div class="text-center text-base mt-3">
              There are no Students to list
              <br />
              Create one by click in the button below
            </div>
            <span class="mt-8 inline-flex rounded-md shadow-sm">
              <button
                (click)="triggerAdd()"
                type="button"
                class="inline-flex items-center px-4 py-2 border border-transparent text-base leading-6 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-blue-700 transition ease-in-out duration-150"
              >
               Add Students
              </button>
            </span>
          </div>
        </div>
      </ng-container>
      <ng-container *ngIf="entities.length">
        <div class="overflow-auto">
          <table
              class="w-full bg-transparent"
              mat-table
              matSort
              [dataSource]="listDataSource"
              #list
          >
            <ng-container
                *ngIf="mode?.type === 'single-select' || mode?.type === 'multi-select'"
            >
              <th></th>
            </ng-container>
            <!-- Selection Column -->
            <ng-container matColumnDef="selection-column">
              <th
                  class="bg-cool-gray-50 dark:bg-cool-gray-700"
                  mat-header-cell
                  mat-sort-header
                  *matHeaderCellDef
              >
            <span class="whitespace-no-wrap">
            </span>
              </th>
              <td mat-cell *matCellDef="let entity">
            <span
                class="pr-6 font-medium text-sm text-secondary whitespace-no-wrap"
            >
              <!-- Entity selection-->
              <ng-container *ngIf="mode?.type">
                <mat-checkbox class="mb-2"
                              [checked]="mode.isSelected(entity)"
                              [name]="formList.name"
                              (change)="
                    mode.isSelected(entity)
                      ? mode.unselect(entity)
                      : mode.select(entity)
                  "
                >
                </mat-checkbox>
              </ng-container>
            </span>
              </td>
            </ng-container>
            
          <!-- ID -->
          <ng-container matColumnDef="id">
            <th
              class="bg-cool-gray-50 dark:bg-cool-gray-700"
              mat-header-cell
              mat-sort-header
              *matHeaderCellDef
            >
              <span class="whitespace-no-wrap">
                Id
              </span>
            </th>
            <td mat-cell *matCellDef="let entity">
              <span
                class="pr-6 font-medium text-sm text-secondary whitespace-no-wrap"
              >
            {{ mode?.type === 'cart' ? entity.value.id : entity.id }}
            </span>
          </td>
        </ng-container>
          <!-- FIRST NAME -->
          <ng-container matColumnDef="first-name">
            <th
              class="bg-cool-gray-50 dark:bg-cool-gray-700"
              mat-header-cell
              mat-sort-header
              *matHeaderCellDef
            >
              <span class="whitespace-no-wrap">
                FirstName
              </span>
            </th>
            <td mat-cell *matCellDef="let entity">
              <span
                class="pr-6 font-medium text-sm text-secondary whitespace-no-wrap"
              >
            {{ mode?.type === 'cart' ? entity.value.firstName : entity.firstName }}
            </span>
          </td>
        </ng-container>
          <!-- LAST NAME -->
          <ng-container matColumnDef="last-name">
            <th
              class="bg-cool-gray-50 dark:bg-cool-gray-700"
              mat-header-cell
              mat-sort-header
              *matHeaderCellDef
            >
              <span class="whitespace-no-wrap">
                LastName
              </span>
            </th>
            <td mat-cell *matCellDef="let entity">
              <span
                class="pr-6 font-medium text-sm text-secondary whitespace-no-wrap"
              >
            {{ mode?.type === 'cart' ? entity.value.lastName : entity.lastName }}
            </span>
          </td>
        </ng-container>
            <!-- ACTIONS -->
            <ng-container matColumnDef="actions">
              <th
                  class="bg-cool-gray-50 dark:bg-cool-gray-700 text-right"
                  mat-header-cell
                  mat-sort-header
                  *matHeaderCellDef
              >
                <span class="whitespace-no-wrap">
                  Actions
                </span>
              </th>
              <ng-container *ngIf="mode?.type === 'cart'">
                <td mat-cell *matCellDef="let index" class="text-right">
                  <span class="inline-flex rounded-md shadow-sm">
                    <button
                      (click)="removeFromCartAt(index)"
                      type="button"
                      class="inline-flex items-center px-4 py-2 border border-transparent text-base leading-6 font-medium rounded-md text-white bg-red-600 hover:bg-red-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-red-700 transition ease-in-out duration-150"
                    >
                     Remove
                    </button>
                  </span>
                </td>
              </ng-container>
              <ng-container *ngIf="mode?.type !== 'cart'">
                <td mat-cell *matCellDef="let entity" class="text-right">
                  <span class="inline-flex rounded-md">
                    <button
                      (click)="triggerDetail(entity.id)"
                      type="button"
                      class="inline-flex items-center px-4 py-2 border border-transparent text-base leading-6 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-blue-700 transition ease-in-out duration-150"
                    >
                     View
                    </button>
                  </span>
                </td>
              </ng-container>
            </ng-container>
            <!-- Footer -->
            <ng-container matColumnDef="listTableFooter">
              <td
                class="px-3 border-0"
                mat-footer-cell
                *matFooterCellDef
                colspan="6"
              >
                <ng-container *ngIf="mode?.type === 'cart'">
                  <div class="flex items-center justify-end py-2">
                    <span class="inline-flex rounded-md shadow-sm">
                      <button
                        (click)="triggerAdd()"
                        type="button"
                        class="inline-flex items-center px-4 py-2 border border-transparent text-base leading-6 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-blue-700 transition ease-in-out duration-150"
                      >
                       Add Student
                      </button>
                    </span>
                  </div>
                </ng-container>
                <!-- Add a your table footer here-->
              </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="
              mode?.type === 'single-select' || mode?.type === 'multi-select'
                ? ['selection-column'].concat(listTableColumns)
                : listTableColumns"></tr>
            <tr
                class="order-row h-16"
                mat-row
                *matRowDef="
                let row;
                columns: mode?.type === 'single-select' || mode?.type === 'multi-select'
                  ? ['selection-column'].concat(listTableColumns)
                  : listTableColumns
              "
            ></tr>
            <tr
                class="h-16"
                mat-footer-row
                *matFooterRowDef="['listTableFooter']"
            ></tr>
          </table>
        </div>
      </ng-container>
    </ng-container>
  </div>
</div>
